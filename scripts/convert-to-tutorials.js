#!/usr/bin/env node

const fs = require('fs').promises;
const path = require('path');

// æ•™ç¨‹åˆ†ç±»æ˜ å°„
const categoryMapping = {
  'è°ƒqingä¸€ç‚¹é€š â€“ æ™šç†Ÿé’å¹´': 'èŒä¸šå‘å±•',
  'æ³•å¾‹ç›¸å…³ç”µå­ä¹¦': 'èŒä¸šå‘å±•',
  'å…¨å›½ç‹¬å®¶ç ”å­¦æ‰‹å†Œ': 'æ–°æ‰‹å…¥é—¨',
  'å†·çœ¼è§‚çˆ± ä¸ƒå¤©æ‰¾åˆ°å¥³æœ‹å‹': 'èŒä¸šå‘å±•',
  'ç”Ÿè´¢å®å…¸ï¼ˆ100ä½ç”Ÿè´¢é«˜æ‰‹çš„åˆ¤æ–­è·¯å¾„å’Œç»éªŒï¼‰': 'å•†ä¸šå¢é•¿',
  'æ€æ ·æ‰“å¼€è‡ªå­¦ä¹‹é—¨': 'æ–°æ‰‹å…¥é—¨',
  'å®Œå…¨å›¾è§£æ‹çˆ±å¿ƒç†å­¦': 'èŒä¸šå‘å±•',
  'å¦‚ä½•è®©ä½ çˆ±çš„äººçˆ±ä¸Šä½ ': 'èŒä¸šå‘å±•',
  'æ¬§é˜³æ˜¥æ™“ï¼š6å‘¨ç»´å¯†è–„è‚Œçº¿æ¡å¼¹åŠ›å¸¦æ™®æ‹‰æ': 'èŒä¸šå‘å±•',
  'å¦‚ä½•åˆ©ç”¨ä¸‹ç­æ—¶é—´å†™ä½œ': 'èŒä¸šå‘å±•',
  'æ­¥æŸéçƒŸç¬¬1-4å­£ åˆé›†': 'èŒä¸šå‘å±•',
  'å¤§å­¦åŒå­¦æå‡å¹¸ç¦æ„Ÿå®ç”¨æ•™ç¨‹': 'èŒä¸šå‘å±•'
};

// è½¬æ¢å·¥å…·åˆ°æ•™ç¨‹æ ¼å¼
function convertToTutorial(tool, id) {
  const { title, description } = tool;
  const category = categoryMapping[title] || 'èŒä¸šå‘å±•';

  // ç”Ÿæˆslug
  const slug = title
    .toLowerCase()
    .replace(/[^a-z0-9\u4e00-\u9fa5]+/g, '-')
    .replace(/^-+|-+$/g, '')
    .substring(0, 50);

  // è§£æåŸå§‹tags
  const originalTags = tool.original_content.match(/tags: \[(.*?)\]/)?.[1] || '';
  const tags = originalTags.split(',').map(tag =>
    tag.trim().replace(/'/g, '').replace(/"/g, '')
  ).filter(t => t);

  // ç”Ÿæˆæ•™ç¨‹å†…å®¹
  const content = generateTutorialContent(title, description);

  return `  {
    id: '${id}',
    title: '${title}',
    description: '${description.replace(/æ˜¯ä¸€æ¬¾.*è½¯ä»¶ï¼Œä¸ºç”¨æˆ·æä¾›é«˜æ•ˆä¾¿æ·çš„æœåŠ¡ä½“éªŒã€‚/, 'è¯¦ç»†æ•™ç¨‹ï¼Œå¸®åŠ©ç”¨æˆ·æ·±å…¥äº†è§£å’ŒæŒæ¡ç›¸å…³çŸ¥è¯†')}',
    content: \`${content}\`,
    category: '${category}',
    tags: [${tags.map(t => `'${t}'`).join(', ')}],
    author: 'AIå·¥å…·å¯¼èˆªç«™',
    publishedAt: '${new Date().toISOString().split('T')[0]}',
    readTime: ${Math.floor(Math.random() * 10 + 5)},
    difficulty: 'beginner',
    featured: false,
    slug: '${slug}'
  }`;
}

// ç”Ÿæˆæ•™ç¨‹å†…å®¹
function generateTutorialContent(title, description) {
  const templates = {
    'è°ƒqingä¸€ç‚¹é€š â€“ æ™šç†Ÿé’å¹´': `# ${title}

## è¯¾ç¨‹ç®€ä»‹

è¿™æ˜¯ä¸€å¥—ä¸“ä¸ºæ™šç†Ÿé’å¹´è®¾è®¡çš„æˆé•¿æŒ‡å—ï¼Œé€šè¿‡ç³»ç»ŸåŒ–çš„å­¦ä¹ è·¯å¾„ï¼Œå¸®åŠ©é’å¹´äººæ‰¾åˆ°è‡ªå·±çš„å‘å±•æ–¹å‘ï¼Œæå‡ä¸ªäººèƒ½åŠ›å’Œç¤¾äº¤æŠ€å·§ã€‚

## å­¦ä¹ ç›®æ ‡

1. **è®¤è¯†è‡ªæˆ‘**ï¼šæ·±å…¥äº†è§£è‡ªå·±çš„æ€§æ ¼ç‰¹ç‚¹å’Œä¼˜åŠ¿
2. **èŒä¸šè§„åˆ’**ï¼šåˆ¶å®šæ¸…æ™°çš„èŒä¸šå‘å±•è·¯å¾„
3. **ç¤¾äº¤æŠ€èƒ½**ï¼šæå‡äººé™…äº¤å¾€å’Œæ²Ÿé€šèƒ½åŠ›
4. **æƒ…ç»ªç®¡ç†**ï¼šå­¦ä¼šæ§åˆ¶æƒ…ç»ªï¼Œä¿æŒç§¯æå¿ƒæ€
5. **ç”Ÿæ´»å¹³è¡¡**ï¼šåœ¨å·¥ä½œå’Œç”Ÿæ´»é—´æ‰¾åˆ°å¹³è¡¡ç‚¹

## è¯¾ç¨‹å¤§çº²

### ç¬¬ä¸€ç« ï¼šè‡ªæˆ‘è®¤çŸ¥ä¸å®šä½
- æ€§æ ¼æµ‹è¯•ä¸åˆ†æ
- å‘ç°ä¸ªäººä¼˜åŠ¿
- ç¡®å®šå‘å±•æ–¹å‘

### ç¬¬äºŒç« ï¼šèŒåœºå¿…å¤‡æŠ€èƒ½
- æœ‰æ•ˆæ²Ÿé€šæŠ€å·§
- æ—¶é—´ç®¡ç†æ–¹æ³•
- å›¢é˜Ÿåä½œèƒ½åŠ›

### ç¬¬ä¸‰ç« ï¼šäººé™…å…³ç³»å¤„ç†
- å»ºç«‹è‰¯å¥½çš„äººé™…ç½‘ç»œ
- å¤„ç†èŒåœºå…³ç³»
- ç»´æŠ¤é•¿æœŸå‹è°Š

### ç¬¬å››ç« ï¼šä¸ªäººæˆé•¿è§„åˆ’
- è®¾å®šåˆç†ç›®æ ‡
- åˆ¶å®šè¡ŒåŠ¨è®¡åˆ’
- æŒç»­å­¦ä¹ æå‡

## å­¦ä¹ å»ºè®®

- æ¯å¤©å­¦ä¹ 30åˆ†é’Ÿï¼Œå¾ªåºæ¸è¿›
- åšå¥½å­¦ä¹ ç¬”è®°ï¼Œå®šæœŸå¤ä¹ 
- ç†è®ºç»“åˆå®è·µï¼Œå­¦ä»¥è‡´ç”¨
- åŠ å…¥å­¦ä¹ ç¤¾ç¾¤ï¼Œäº’ç›¸äº¤æµ

## é€‚ç”¨äººç¾¤

- åˆšæ­¥å…¥èŒåœºçš„å¹´è½»äºº
- å¸Œæœ›æå‡è‡ªæˆ‘çš„é’å¹´
- å¯»æ±‚äººç”Ÿæ–¹å‘çš„è¿·èŒ«è€…
- æƒ³è¦æ”¹å˜ç°çŠ¶çš„å¥‹æ–—è€…`,

    'æ³•å¾‹ç›¸å…³ç”µå­ä¹¦': `# ${title}

## èµ„æºç®€ä»‹

è¿™æ˜¯ä¸€å¥—å…¨é¢çš„æ³•å¾‹çŸ¥è¯†å­¦ä¹ èµ„æºï¼Œæ¶µç›–æ°‘äº‹ã€åˆ‘äº‹ã€ç»æµæ³•ç­‰å¤šä¸ªæ³•å¾‹é¢†åŸŸï¼Œä¸ºè¯»è€…æä¾›ç³»ç»Ÿçš„æ³•å¾‹çŸ¥è¯†å­¦ä¹ ææ–™ã€‚

## å­¦ä¹ ç›®æ ‡

1. **åŸºç¡€æ³•å¾‹çŸ¥è¯†**ï¼šæŒæ¡å¸¸ç”¨æ³•å¾‹æ¦‚å¿µå’ŒåŸåˆ™
2. **æ³•å¾‹æ€ç»´**ï¼šåŸ¹å…»æ³•å¾‹åˆ†æå’Œæ¨ç†èƒ½åŠ›
3. **å®åŠ¡åº”ç”¨**ï¼šäº†è§£æ³•å¾‹åœ¨å®é™…ç”Ÿæ´»ä¸­çš„åº”ç”¨
4. **æƒç›Šä¿æŠ¤**ï¼šå­¦ä¼šç”¨æ³•å¾‹ä¿æŠ¤è‡ªèº«æƒç›Š
5. **èŒä¸šå‘å±•**ï¼šä¸ºæ³•å¾‹ç›¸å…³èŒä¸šæ‰“ä¸‹åŸºç¡€

## èµ„æºå†…å®¹

### åŸºç¡€æ³•å­¦
- æ³•ç†å­¦åŸºç¡€
- å®ªæ³•å­¦æ¦‚è®º
- æ³•åˆ¶å²ç ”ç©¶

### éƒ¨é—¨æ³•å­¦ä¹ 
- æ°‘æ³•æ€»åˆ™ä¸åˆ†åˆ™
- åˆ‘æ³•ç†è®ºä¸å®åŠ¡
- è¡Œæ”¿æ³•ä¸è¡Œæ”¿è¯‰è®¼æ³•
- ç»æµæ³•åŸºç¡€

### å®åŠ¡æŒ‡å—
- åˆåŒèµ·è‰ä¸å®¡æŸ¥
- è¯‰è®¼æµç¨‹è¯¦è§£
- æ³•å¾‹æ–‡ä¹¦å†™ä½œ
- æ¡ˆä¾‹åˆ†ææ–¹æ³•

### ä¸“é¢˜ç ”ç©¶
- çŸ¥è¯†äº§æƒä¿æŠ¤
- åŠ³åŠ¨æ³•å¾‹å®åŠ¡
- å…¬å¸æ³•åŠ¡ç®¡ç†
- å›½é™…æ³•åŸºç¡€

## å­¦ä¹ æ–¹æ³•

1. ç³»ç»Ÿå­¦ä¹ æ³•å¾‹ä½“ç³»
2. ç»“åˆæ¡ˆä¾‹ç†è§£ç†è®º
3. å…³æ³¨æ³•å¾‹æœ€æ–°åŠ¨æ€
4. å‚ä¸æ¨¡æ‹Ÿæ³•åº­ç»ƒä¹ 

## é€‚ç”¨äººç¾¤

- æ³•å¾‹ä¸“ä¸šå­¦ç”Ÿ
- ä¼ä¸šæ³•åŠ¡äººå‘˜
- æ³•å¾‹çˆ±å¥½è€…
- éœ€è¦æ³•å¾‹çŸ¥è¯†çš„èŒåœºäººå£«`,

    'å…¨å›½ç‹¬å®¶ç ”å­¦æ‰‹å†Œ': `# ${title}

## æ‰‹å†Œç®€ä»‹

è¿™æ˜¯ä¸€å¥—æ¶µç›–å…¨å›½é‡è¦å†å²æ–‡åŒ–ååŸçš„ç ”å­¦æ—…è¡ŒæŒ‡å—ï¼ŒåŒ…å«åŒ—äº¬ã€æˆéƒ½ã€æ•¦ç…Œã€æ­å·ã€æ´›é˜³ã€æµå—ã€ç»å…´å’Œè¥¿å®‰ç­‰åœ°çš„è¯¦ç»†ç ”å­¦æ–¹æ¡ˆã€‚

## å­¦ä¹ ç›®æ ‡

1. **å†å²æ–‡åŒ–è®¤çŸ¥**ï¼šæ·±å…¥äº†è§£ä¸­å›½å†å²æ–‡åŒ–
2. **å®åœ°è€ƒå¯Ÿèƒ½åŠ›**ï¼šåŸ¹å…»è§‚å¯Ÿå’Œè®°å½•èƒ½åŠ›
3. **è·¨å­¦ç§‘å­¦ä¹ **ï¼šæ•´åˆå¤šå­¦ç§‘çŸ¥è¯†
4. **å›¢é˜Ÿåä½œ**ï¼šæå‡å›¢é˜Ÿåˆä½œç²¾ç¥
5. **ç»¼åˆç´ å…»**ï¼šå…¨é¢æå‡äººæ–‡ç´ å…»

## ç ”å­¦å†…å®¹

### åŒ—äº¬ç¯‡
- æ•…å®«åšç‰©é™¢æ·±åº¦æ¸¸å­¦
- é•¿åŸå†å²ä¸å»ºç­‘ç ”ç©¶
- åŒ—äº¬å¤§å­¦å‚è§‚äº¤æµ
- ç§‘æŠ€é¦†æ¢ç´¢å­¦ä¹ 

### è¥¿å®‰ç¯‡
- å…µé©¬ä¿‘è€ƒå¤å‘ç°
- å¤§é›å¡”å†å²æ–‡åŒ–
- å¤åŸå¢™å»ºç­‘ç ”ç©¶
- é™•è¥¿å†å²åšç‰©é¦†

### æˆéƒ½ç¯‡
- ä¸‰æ˜Ÿå †æ–‡æ˜æ¢ç´¢
- éƒ½æ±Ÿå °æ°´åˆ©å·¥ç¨‹
- æ­¦ä¾¯ç¥ ä¸‰å›½æ–‡åŒ–
- ç†ŠçŒ«åŸºåœ°ç”Ÿæ€ç ”ç©¶

### æ•¦ç…Œç¯‡
- è«é«˜çªŸè‰ºæœ¯é‰´èµ
- ä¸ç»¸ä¹‹è·¯å†å²
- æ²™æ¼ åœ°ç†è€ƒå¯Ÿ
- æ•¦ç…Œæ–‡åŒ–ä¼ æ‰¿

## ç ”å­¦å‡†å¤‡

1. è¡Œå‰çŸ¥è¯†å‚¨å¤‡
2. ç ”å­¦å·¥å…·å‡†å¤‡
3. å®‰å…¨æ³¨æ„äº‹é¡¹
4. ç ”å­¦æ—¥å¿—è®°å½•

## é€‚ç”¨äººç¾¤

- ä¸­å°å­¦ç”Ÿç ”å­¦å›¢é˜Ÿ
- å®¶åº­äº²å­ç ”å­¦
- å¤§å­¦ç”Ÿå®è·µæ´»åŠ¨
- æ•™è‚²å·¥ä½œè€…`,

    'ç”Ÿè´¢å®å…¸ï¼ˆ100ä½ç”Ÿè´¢é«˜æ‰‹çš„åˆ¤æ–­è·¯å¾„å’Œç»éªŒï¼‰': `# ${title}

## è¯¾ç¨‹ç®€ä»‹

æ±‡é›†100ä½æˆåŠŸåˆ›ä¸šè€…å’ŒæŠ•èµ„äººçš„å®æˆ˜ç»éªŒï¼Œæ·±åº¦å‰–æä»–ä»¬çš„å•†ä¸šæ€ç»´ã€å†³ç­–é€»è¾‘å’ŒæˆåŠŸè·¯å¾„ï¼Œä¸ºåˆ›ä¸šè€…æä¾›å®è´µçš„ç»éªŒå€Ÿé‰´ã€‚

## å­¦ä¹ ç›®æ ‡

1. **å•†ä¸šæ€ç»´åŸ¹å…»**ï¼šå»ºç«‹ç³»ç»Ÿçš„å•†ä¸šåˆ†ææ¡†æ¶
2. **æœºä¼šè¯†åˆ«èƒ½åŠ›**ï¼šå­¦ä¼šå‘ç°å’Œè¯„ä¼°å•†ä¸šæœºä¼š
3. **é£é™©ç®¡ç†**ï¼šæŒæ¡é£é™©è¯†åˆ«å’Œæ§åˆ¶æ–¹æ³•
4. **èµ„æºæ•´åˆ**ï¼šæå‡èµ„æºè·å–å’Œé…ç½®èƒ½åŠ›
5. **æŒç»­æˆé•¿**ï¼šå»ºç«‹ç»ˆèº«å­¦ä¹ çš„ä¹ æƒ¯

## æ ¸å¿ƒå†…å®¹

### ç¬¬ä¸€éƒ¨åˆ†ï¼šåˆ›ä¸šæ€ç»´
- å¦‚ä½•å‘ç°å¸‚åœºéœ€æ±‚
- éªŒè¯å•†ä¸šæ¨¡å¼çš„æ–¹æ³•
- æœ€å°å¯è¡Œäº§å“ç­–ç•¥
- å¿«é€Ÿè¿­ä»£çš„é‡è¦æ€§

### ç¬¬äºŒéƒ¨åˆ†ï¼šæŠ•èµ„é€»è¾‘
- ä»·å€¼æŠ•èµ„çš„åŸºæœ¬åŸåˆ™
- å¦‚ä½•è¯„ä¼°é¡¹ç›®æ½œåŠ›
- æŠ•èµ„æ—¶æœºçš„æŠŠæ¡
- é£é™©ä¸æ”¶ç›Šçš„å¹³è¡¡

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¥é”€å¢é•¿
- ç”¨æˆ·å¢é•¿ç­–ç•¥
- ç§åŸŸæµé‡è¿è¥
- å†…å®¹è¥é”€æŠ€å·§
- ç¤¾ç¾¤è¿è¥æ–¹æ³•

### ç¬¬å››éƒ¨åˆ†ï¼šå›¢é˜Ÿç®¡ç†
- é«˜æ•ˆå›¢é˜Ÿçš„æ„å»º
- äººæ‰æ¿€åŠ±æœºåˆ¶
- ä¼ä¸šæ–‡åŒ–å»ºè®¾
- é¢†å¯¼åŠ›æå‡

### ç¬¬äº”éƒ¨åˆ†ï¼šæ¡ˆä¾‹åˆ†æ
- æˆåŠŸæ¡ˆä¾‹æ·±åº¦è§£æ
- å¤±è´¥æ¡ˆä¾‹ç»éªŒæ€»ç»“
- è¡Œä¸šè¶‹åŠ¿æ´å¯Ÿ
- æœªæ¥æœºä¼šé¢„æµ‹

## å­¦ä¹ è·¯å¾„

1. æ¯æ—¥é˜…è¯»ä¸€ä¸ªæ¡ˆä¾‹
2. æç‚¼å…³é”®å†³ç­–ç‚¹
3. å¯¹æ¯”è‡ªèº«æƒ…å†µæ€è€ƒ
4. åˆ¶å®šä¸ªäººè¡ŒåŠ¨è®¡åˆ’
5. å®è·µéªŒè¯å¹¶å¤ç›˜

## é€‚ç”¨äººç¾¤

- åˆ›ä¸šè€…å’Œå‡†åˆ›ä¸šè€…
- ä¸­å°ä¼ä¸šç»è¥è€…
- æŠ•èµ„ç†è´¢çˆ±å¥½è€…
- èŒåœºè¿›é˜¶äººå£«`,

    'æ€æ ·æ‰“å¼€è‡ªå­¦ä¹‹é—¨': `# ${title}

## è¯¾ç¨‹ç®€ä»‹

è¿™æ˜¯ä¸€æœ¬ç»å…¸çš„è‡ªå­¦æ–¹æ³•è®ºæŒ‡å—ï¼Œå¸®åŠ©å­¦ä¹ è€…æŒæ¡é«˜æ•ˆçš„è‡ªå­¦æŠ€å·§ï¼ŒåŸ¹å…»ç»ˆèº«å­¦ä¹ èƒ½åŠ›ï¼Œå®ç°çŸ¥è¯†å’ŒæŠ€èƒ½çš„è‡ªä¸»æå‡ã€‚

## å­¦ä¹ ç›®æ ‡

1. **å­¦ä¹ æ–¹æ³•æŒæ¡**ï¼šç³»ç»ŸæŒæ¡å„ç§è‡ªå­¦æŠ€å·§
2. **å­¦ä¹ ä¹ æƒ¯å…»æˆ**ï¼šå»ºç«‹è‰¯å¥½çš„å­¦ä¹ ä¹ æƒ¯
3. **çŸ¥è¯†ç®¡ç†**ï¼šæ„å»ºä¸ªäººçŸ¥è¯†ä½“ç³»
4. **æ•ˆç‡æå‡**ï¼šæé«˜å­¦ä¹ æ•ˆç‡å’Œè´¨é‡
5. **æŒç»­è¿›æ­¥**ï¼šä¿æŒç»ˆèº«å­¦ä¹ çš„åŠ¨åŠ›

## è¯¾ç¨‹å†…å®¹

### ç¬¬ä¸€ç« ï¼šè‡ªå­¦çš„åŸºç¡€
- è®¤è¯†è‡ªå­¦çš„ä»·å€¼
- å…‹æœå­¦ä¹ éšœç¢
- åˆ¶å®šå­¦ä¹ è®¡åˆ’
- è¥é€ å­¦ä¹ ç¯å¢ƒ

### ç¬¬äºŒç« ï¼šé«˜æ•ˆå­¦ä¹ æ³•
- å¿«é€Ÿé˜…è¯»æŠ€å·§
- ç¬”è®°æ•´ç†æ–¹æ³•
- è®°å¿†æŠ€å·§è®­ç»ƒ
- æ€ç»´å¯¼å›¾åº”ç”¨

### ç¬¬ä¸‰ç« ï¼šå­¦ä¹ èµ„æºè·å–
- ç½‘ç»œèµ„æºåˆ©ç”¨
- å›¾ä¹¦é¦†èµ„æºæŸ¥æ‰¾
- åœ¨çº¿è¯¾ç¨‹é€‰æ‹©
- å­¦ä¹ ç¤¾ç¾¤å‚ä¸

### ç¬¬å››ç« ï¼šçŸ¥è¯†å†…åŒ–ä¸åº”ç”¨
- çŸ¥è¯†æ•´ç†æ¡†æ¶
- å®è·µåº”ç”¨æ–¹æ³•
- è¾“å‡ºå€’é€¼è¾“å…¥
- æ•™å­¦ç›¸é•¿åŸç†

### ç¬¬äº”ç« ï¼šå­¦ä¹ è¿›é˜¶ç­–ç•¥
- è·¨å­¦ç§‘å­¦ä¹ 
- æ·±åº¦å­¦ä¹ æ–¹æ³•
- æ‰¹åˆ¤æ€§æ€ç»´
- åˆ›æ–°èƒ½åŠ›åŸ¹å…»

## å®è·µå»ºè®®

1. é€‰æ‹©æ„Ÿå…´è¶£çš„é¢†åŸŸå¼€å§‹
2. åˆ¶å®šå¯æ‰§è¡Œçš„å­¦ä¹ è®¡åˆ’
3. å»ºç«‹å­¦ä¹ åé¦ˆæœºåˆ¶
4. å®šæœŸæ€»ç»“å’Œè°ƒæ•´æ–¹æ³•
5. ä¸ä»–äººåˆ†äº«å­¦ä¹ æˆæœ

## é€‚ç”¨äººç¾¤

- åœ¨æ ¡å­¦ç”Ÿ
- èŒåœºäººå£«
- è½¬è¡Œå­¦ä¹ è€…
- ç»ˆèº«å­¦ä¹ è·µè¡Œè€…`
  };

  // ä½¿ç”¨é»˜è®¤æ¨¡æ¿
  const defaultTemplate = `# ${title}

## è¯¾ç¨‹ç®€ä»‹

${description}

æœ¬æ•™ç¨‹å°†å¸®åŠ©æ‚¨ç³»ç»Ÿåœ°å­¦ä¹ å’ŒæŒæ¡ç›¸å…³çŸ¥è¯†ï¼Œé€šè¿‡ç†è®ºè®²è§£å’Œå®è·µæŒ‡å¯¼ï¼Œè®©æ‚¨èƒ½å¤Ÿå¿«é€Ÿå…¥é—¨å¹¶ç†Ÿç»ƒè¿ç”¨ã€‚

## å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬æ•™ç¨‹çš„å­¦ä¹ ï¼Œæ‚¨å°†èƒ½å¤Ÿï¼š
1. æŒæ¡åŸºç¡€æ¦‚å¿µå’ŒåŸç†
2. äº†è§£å®é™…åº”ç”¨åœºæ™¯
3. å­¦ä¼šè§£å†³å¸¸è§é—®é¢˜
4. æå‡ç›¸å…³æŠ€èƒ½æ°´å¹³
5. ä¸ºè¿›é˜¶å­¦ä¹ æ‰“ä¸‹åŸºç¡€

## è¯¾ç¨‹å¤§çº²

### ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€çŸ¥è¯†
- æ ¸å¿ƒæ¦‚å¿µä»‹ç»
- åŸºæœ¬åŸç†è®²è§£
- å¸¸ç”¨æœ¯è¯­è§£é‡Š

### ç¬¬äºŒéƒ¨åˆ†ï¼šå®è·µåº”ç”¨
- å®é™…æ¡ˆä¾‹åˆ†æ
- æ“ä½œæ­¥éª¤è¯¦è§£
- æ³¨æ„äº‹é¡¹è¯´æ˜

### ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶æå‡
- é«˜çº§æŠ€å·§åˆ†äº«
- ä¼˜åŒ–æ–¹æ³•ä»‹ç»
- æœ€ä½³å®è·µæ€»ç»“

### ç¬¬å››éƒ¨åˆ†ï¼šèµ„æºæ¨è
- æ¨èå­¦ä¹ èµ„æ–™
- ç›¸å…³å·¥å…·ä»‹ç»
- ç¤¾ç¾¤äº¤æµå¹³å°

## å­¦ä¹ æ–¹æ³•

1. å¾ªåºæ¸è¿›ï¼Œä»åŸºç¡€å¼€å§‹
2. ç†è®ºç»“åˆå®è·µ
3. å¤šåšç»ƒä¹ ï¼Œå·©å›ºçŸ¥è¯†
4. ç§¯ææ€è€ƒï¼Œä¸¾ä¸€åä¸‰
5. å‚ä¸è®¨è®ºï¼Œäº’ç›¸å­¦ä¹ 

## é€‚ç”¨äººç¾¤

- åˆå­¦è€…å’Œå…¥é—¨è€…
- å¸Œæœ›ç³»ç»Ÿå­¦ä¹ çš„äººå£«
- éœ€è¦æå‡æŠ€èƒ½çš„ä»ä¸šè€…
- å¯¹è¯¥é¢†åŸŸæ„Ÿå…´è¶£çš„çˆ±å¥½è€…

## æ€»ç»“

æŒç»­å­¦ä¹ æ˜¯æˆåŠŸçš„å…³é”®ã€‚å¸Œæœ›é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæ‚¨èƒ½å¤ŸæŒæ¡æ‰€éœ€çš„çŸ¥è¯†å’ŒæŠ€èƒ½ï¼Œåœ¨å­¦ä¹ å’Œå·¥ä½œä¸­å–å¾—æ›´å¥½çš„æˆæœã€‚`;

  return templates[title] || defaultTemplate;
}

async function main() {
  try {
    console.log('ğŸš€ å¼€å§‹è½¬æ¢å†…å®¹ä¸ºæ•™ç¨‹æ ¼å¼...\n');

    // è¯»å–ç§»é™¤çš„å·¥å…·æ•°æ®
    const removedToolsPath = path.join(__dirname, '..', 'removed-tools-detailed.json');
    const removedTools = JSON.parse(await fs.readFile(removedToolsPath, 'utf8'));

    // å»é‡ï¼ˆå› ä¸ºæœ‰é‡å¤çš„"è°ƒqingä¸€ç‚¹é€š â€“ æ™šç†Ÿé’å¹´"ï¼‰
    const uniqueTools = [];
    const seenTitles = new Set();

    for (const tool of removedTools) {
      if (!seenTitles.has(tool.title)) {
        uniqueTools.push(tool);
        seenTitles.add(tool.title);
      }
    }

    console.log(`ğŸ“‹ æ‰¾åˆ° ${uniqueTools.length} ä¸ªéœ€è¦è½¬æ¢çš„å†…å®¹\n`);

    // ç”Ÿæˆæ•™ç¨‹å¯¹è±¡
    const tutorials = [];
    let startId = 36; // ä»ID 36å¼€å§‹

    for (const tool of uniqueTools) {
      const tutorial = convertToTutorial(tool, startId);
      tutorials.push(tutorial);
      console.log(`âœ… è½¬æ¢: ${tool.title} -> ID: ${startId}`);
      startId++;
    }

    // è¯»å–ç°æœ‰çš„tutorials.tsæ–‡ä»¶
    const tutorialsPath = path.join(__dirname, '..', 'src', 'data', 'tutorials.ts');
    const tutorialsContent = await fs.readFile(tutorialsPath, 'utf8');

    // æ‰¾åˆ°æ•°ç»„çš„ç»“æŸä½ç½®
    const arrayEndIndex = tutorialsContent.lastIndexOf('];');

    if (arrayEndIndex === -1) {
      throw new Error('æ— æ³•æ‰¾åˆ°tutorialsæ•°ç»„çš„ç»“æŸä½ç½®');
    }

    // åœ¨æ•°ç»„æœ«å°¾æ·»åŠ æ–°çš„æ•™ç¨‹
    const beforeEnd = tutorialsContent.substring(0, arrayEndIndex);
    const afterEnd = tutorialsContent.substring(arrayEndIndex);

    // æ£€æŸ¥æ˜¯å¦éœ€è¦æ·»åŠ é€—å·
    const needsComma = beforeEnd.trim().endsWith('}');
    const separator = needsComma ? ',\n' : '';

    // ç»„åˆæ–°å†…å®¹
    const newContent = beforeEnd + separator + tutorials.join(',\n') + '\n' + afterEnd;

    // å¤‡ä»½å¹¶ä¿å­˜
    const backupPath = `${tutorialsPath}.backup-${Date.now()}`;
    await fs.writeFile(backupPath, tutorialsContent);
    console.log(`\nğŸ“¦ å¤‡ä»½åˆ›å»º: ${backupPath}`);

    await fs.writeFile(tutorialsPath, newContent);
    console.log(`âœ… æˆåŠŸæ·»åŠ  ${tutorials.length} ä¸ªæ•™ç¨‹åˆ° tutorials.ts`);

    // ä¿å­˜è½¬æ¢è®°å½•
    const conversionLog = {
      timestamp: new Date().toISOString(),
      converted: uniqueTools.length,
      startId: 36,
      endId: startId - 1,
      titles: uniqueTools.map(t => t.title)
    };

    await fs.writeFile(
      path.join(__dirname, '..', 'conversion-log.json'),
      JSON.stringify(conversionLog, null, 2)
    );

    console.log('\nâœ¨ è½¬æ¢å®Œæˆï¼');
    console.log('\nğŸ“ ä¸‹ä¸€æ­¥ï¼š');
    console.log('1. è¿è¡Œ npm run dev æµ‹è¯•');
    console.log('2. æ£€æŸ¥æ•™ç¨‹é¡µé¢æ˜¾ç¤ºæ˜¯å¦æ­£å¸¸');
    console.log('3. æ ¹æ®éœ€è¦ä¼˜åŒ–æ•™ç¨‹å†…å®¹');

  } catch (error) {
    console.error('âŒ é”™è¯¯:', error.message);
    console.error(error.stack);
    process.exit(1);
  }
}

main();